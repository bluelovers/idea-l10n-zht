<html>
<body>
報告非首選樣式的 <code>Collection.toArray()</code> 調用，並建議套用首選樣式。
<p>將集合轉換為數組有兩種樣式：</p>
<ul>
  <li>預先確定大小的陣列，例如 <code>c.toArray(new String[c.size()])</code></li>
  <li>空陣列，例如 <code>c.toArray(new String[0])</code></li>
</ul>
<p>在舊的 Java 版本中，建議使用預先確定大小的陣列，因為創建適當大小的陣列所需的反射調用非常慢。</p>
<p>不過，自 OpenJDK 6 的最新更新以來，此調用已被添加，使得空陣列版本的性能與預先確定大小的版本相同，有時甚至更高一籌。 此外，傳遞預先確定大小的陣列對於並發集合或同步集合很危險，因為 <code>size</code> 和 <code>toArray</code> 調用之間可能會發生資料競爭。 如果在運算過程中並發收縮該集合，可能導致陣列末尾出現額外的 <code>null</code>。</p>
<!-- tooltip end -->
<p>使用檢查選項可以選擇首選樣式。</p>
</body>
</html>